# Monty Hall Problem

The Monty Hall problem is a probability puzzle based on a game show. The game show host, Monty Hall, presents the contestant with three doors. Behind one of the doors is a car, and behind the other two doors are goats. The contestant chooses a door, and then Monty Hall opens one of the other two doors to reveal a goat. The contestant is then given the option to switch doors. 

## Should the contestant switch doors?

At first glance, a person may assume that switching doors has no impact on the probability of success.  That is not the case!

* The probability of winning the car is $\frac{2}{3}$ if the contestant switches doors.
* The probability of winning the car is $\frac{1}{3}$ if the contestant does not switch doors.

The puzzle goes even deeper from an observers point of view.

### Observer Perspective

If contestants go into the game knowing the facts above they would always switch doors.  So an observer of the game would see contestants win  two thirds of the time.  However, if we assume all contestants are uninformed that switching doors improves their chance of winning then they will be just as likely to keep their original door choice as they are to switch.  

With the uninformed contestants assumption, observers will see contestants win the game with a probability of $\frac{1}{2}$.

## Brief Summary - Observer VS Contestant

Let us compile what has been stated.

* Contestants that do not switch doors will have a probability of winning of $\frac{1}{3}$.
* Contestants that do switch doors will have a probability of winning of $\frac{2}{3}$.
* Observers watching uninformed contestants will see the game won with a probability of $\frac{1}{2}$.

It can give the impression the outcome probabilities are different between the observer and the contestant.

---

## Counterintuitive Solution

The Monty Hall problem is counterintuitive.

* The probability of winning the car is uniformly distributed among the doors options initially. 
* The probability of the initial door choice being correct never changes. 
* When Monty Hall opens a door, the probability of the remaining door not selected by the contestant doubles.
* An observer watching uninformed contestants see then win half the time.

Mathematical applications often have links to real-world scenarios and constraints that can be visualized in an intuitive manner.  There are exceptions that humans may struggle to understand. 

Probability theory is well established and is known for its counterintuitive results.  When counterintuitive results are linked to real-world scenarios, it can give the impression that objects or scenarios are defying logic. Such scenarios can appear like magic.  Probability theory is often referred to as the *mathematics of magic*. 

Many counterintuitive events observed by physicists and mathematicians are often linked to probability theory.  Quantum physics is often based in probability theory and experiment observers are often left baffled. This is related to Albert Einstein's claim that quantum physics is **spooky action at a distance**.  

---

## Mathematical Approach

Despite being potentially counterintuitive, the Monty Hall problem can be proven mathematically using the law of total probability and Bayes' theorem.  The law of total probability states that the probability of an event is the sum of the probabilities of the event given certain conditions.  

### The Law of Total Probability

Let $A$ be an event and $B_1, B_2, ..., B_n$ be a set of mutually exclusive and exhaustive events.  The probability of $A$ can be expressed as the sum of the probabilities of $A$ given each of the events $B_i$ multiplied by the probability of each event $B_i$.

$$P(A) = \sum\limits_{i=1}^{n} P(A|B_i)P(B_i)$$

Bayesian probability can be viewed in one of two ways:

1. It provides a method for calculating the probabiliby of an event based on prior knowledge of conditions that may be related to the event.  
2. It provides a method of recalculating the probability of an event based on new information.

The second item above is relevant to the Monty Hall problem.  The contestant has new information after Monty Hall opens one of the doors.  The contestant can use this new information to recalculate the probability of winning the car.

### Proof

We will first need to define and label a few facts.

- $D_p$: The door the contestant initially picks
- $D_c$: The door with the car
- $D_m$: The door Monty Hall opens to reveal a goat
- $D_s$: The door the contestant selects after Monty Hall reveals a goat
    - $D_s = D_p$: Contestant stays with the original door
    - $D_s \neq D_p$: Constant switches doors

Let's define scenarios using logic expressions 

- $(D_s = D_c)$: The contestant wins the car.
- $( D_s = D_p)$: The contestant does not switch doors.
- $(D_s \neq D_p)$: The contestant switched doors.
- $(D_p = D_c)$: The  contestant initially picks the door with the car. 
- $(D_m = D_c)$: Monty Hall opens the door with the car.  
- $(D_m = D_p)$: Monty Hall opens the door the contestant initially picked.
- $(D_m \neq D_p \land D_m \neq D_c)$: Monty Hall does not open the door with the car or the door selected by the contestant.

#### Contestant Probabilities

Consider the scenario where the contestant wins and did not switch doors.  This is logically expressed below.
$$(D_s = D_c) \land (D_s = D_p)$$

Notice the three expressions below are exhaustive and mutually exclusive with respect to the actions of Monty Hall. Two of these actions are impossible (contradictions $\bot$) implying the remaining case is a tautology ($\top$).

- $(D_m = D_c) \implies \bot \implies P(D_m = D_c) = P(\bot) = 0$
- $(D_m = D_p) \implies \bot \implies P(D_m = D_p) = P(\bot) = 0$
- $(D_m \neq D_p) \land (D_m \neq D_c) \implies \top \implies P(D_m \neq D_p \land D_m \neq D_c) = P(\top) =1$

The conditional probability the player wins without switching can be expressed using the law of total probability with respect to the actions of Monty Hall.

$$
\begin{align*}
P(D_s = D_c | D_s = D_p) &= P(D_s = D_c | D_s = D_p, D_m = D_c) \cdot \underbrace{P(D_m = D_c)}_{0} \\\\
    &+ P(D_s = D_c | D_s = D_p, D_m = D_c) \cdot \underbrace{P(D_m = D_p)}_{0} \\\\
    &+ P(D_s = D_c | D_s = D_p, D_m \neq D_p \land D_m \neq D_c) \cdot \underbrace{P(D_m \neq D_p \land D_m \neq D_c)}_{1}
\end{align*}
$$

The above can be simplified to the expression below.

$$P(D_s = D_c | D_s = D_p) = P(D_s = D_c | D_s = D_p, D_m \neq D_p \land D_m \neq D_c)$$

Converting the conditional probability to the probability of a logical expression is shown below.  Notice the conditional probability will simplify to a probability without condition.  Specifically, it becomes the probability of the player selecting the door with the car without any extra information from Monty Hall's actions.  There are three doors and so the probability will be $\frac{1}{3}$.  All of this is explained by the express below.

$$
\begin{align*}
P(D_s = D_c | D_s = D_p) &= P(D_s = D_c | D_s = D_p, D_m \neq D_p \land D_m \neq D_c) \\
&= P(\underbrace{D_s = D_c \land D_s = D_p}_{D_c = D_p} \land \underbrace{D_m \neq D_p \land D_m \neq D_c}_{\top}) \\\\
&= P(D_c = D_p)\\
&= \frac{1}{3}
\end{align*}
$$

The probability the contestant wins the car without switching doors is $\frac{1}{3}$.

Now consider the probability the contestant wins the car by switching doors.  

$$P(D_s = D_c | D_s \neq D_p)$$

Using a similar total probability argument with respect to Monty Hall's actions we have the following:

$$
\begin{align*}
P(D_s = D_c | D_s \neq D_p) &= P(D_s = D_c | D_s \neq D_p, D_m = D_c) \cdot \underbrace{P(D_m = D_c)}_{0} \\\\
    &+ P(D_s = D_c | D_s \neq D_p, D_m = D_c) \cdot \underbrace{P(D_m = D_p)}_{0} \\\\
    &+ P(D_s = D_c | D_s \neq D_p, D_m \neq D_p \land D_m \neq D_c) \cdot \underbrace{P(D_m \neq D_p \land D_m \neq D_c)}_{1}
\end{align*}
$$

This simplifies to the expression below.

$$P(D_s = D_c | D_s \neq D_p) = P(D_s = D_c | D_s \neq D_p, D_m \neq D_p \land D_m \neq D_c)$$

Apply the logical expressions

$$
\begin{align*}
P(D_s = D_c | D_s \neq D_p) &= P(D_s = D_c | D_s \neq D_p, D_m \neq D_p \land D_m \neq D_c) \\
&= P(\underbrace{D_s = D_c \land D_s \neq D_p}_{D_c \neq D_p} \land \underbrace{D_m \neq D_p \land D_m \neq D_c}_{\top}) \\\\
&= P(D_c \neq D_p) \\
&= 1 - P(D_c = D_p) \\
&= 1 - \frac{1}{3} \\
&= \frac{2}{3}
\end{align*}
$$

The probability of the contestant winning the car by switching doors is $\frac{2}{3}$

#### Observer Probabilities

At this point, we have described the probabilities facing the contestant. Now, let's consider the probabilities associated with an observer watching games that entail uninformed contestants. The observer probability is expressed below.

$$P(D_s = D_c)$$

Using the law of total probability, we express the probability of winning based on the exhaustive and mutually exclusive events of whether a contestant switches doors.  This is shown below.

$$ P(D_s = D_c) = P(D_s = D_c \mid D_s = D_p)P(D_s = D_p) + P(D_s = D_c \mid D_s \neq D_p)P(D_s \neq D_p) $$

Substituting the probabilities calculated earlier and the fact constestants are uninformed:

- $P(D_s = D_c \mid D_s = D_p) = \frac{1}{3}$ (probability of winning without switching),
- $P(D_s = D_c \mid D_s \neq D_p) = \frac{2}{3}$ (probability of winning by switching),
- $P(D_s = D_p) = \frac{1}{2}$ (probability of not switching by uninformed contestant),
- $P(D_s \neq D_p) = 1- P(D_s = D_p) = \frac{1}{2}$ (probability of switching by uninformed contestant),

Applying the values provides the exact probability as shown below.

$$
\begin{align*}
P(D_s = D_c) &= \underbrace{P(D_s = D_c \mid D_s = D_p)}_{\frac{1}{3}} \underbrace{P(D_s = D_p)}_{\frac{1}{2}} 
 + \underbrace{P(D_s = D_c \mid D_s \neq D_p)}_{\frac{2}{3}} \underbrace{P(D_s \neq D_p)}_{\frac{1}{2}} \\\\
&= \frac{1}{3} \cdot \frac{1}{2} + \frac{2}{3} \cdot \frac{1}{2} \\\\
&= \frac{1}{6} + \frac{2}{6} \\\\
&= \frac{3}{6} \\\\
&= \frac{1}{2}
\end{align*}
$$

This demonstrates mathematically that observing the game, played by uninformed contestants, will see a win with probability of $\frac{1}{2}$.

---

## Java Simulation

Probability results that rely on total probability can be hard to digest at times.  Fortunately, computer simulations can help provide empirical evidence.    You can find Java code at the GitHub link below that provides simulation results. 

[https://github.com/abstractclassroom/Monty-Hall-Simulator](https://github.com/abstractclassroom/Monty-Hall-Simulator)

The code above will do the following:

* Two million Monty Hall Game simulations
    * One million simulations where the player will **not** switch doors.
    * One million simulations where the player will switch doors.

Below are the results of the above simulation experiment:

* Count Totals
    * No Switch strategy wins: 330089
    * Switch strategy wins: 669065
    * Total wins: 999154

Below are the proportions of the above counts.  

* Count Proportions
    * No switch win rate: $0.3301  \approx \frac{1}{3}$
    * Switch win rate: $0.6691  \approx \frac{2}{3}$
    * Total win rate: $0.4996  \approx \frac{1}{2}$

Notice how closely the empirical results are to the predicted outcomes.

---

## Conclusion

The following summarizes the above proof:

* The probability of winning the car is $\frac{2}{3}$ if the contestant switches doors.
* The probability of winning the car is $\frac{1}{3}$ if the contestant does **not** switch doors.  
* Initially all doors has a probability of success of $\frac{1}{3}$.
* The probability of the door not selected by the player and not opened by Monty Hall doubles.
* The probability of observing an uninformed contestant win is $\frac{1}{2}$.

All things considered...**Spooky at a distance**





